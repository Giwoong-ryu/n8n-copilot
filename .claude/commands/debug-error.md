---
description: 체계적 에러 디버깅 및 해결 (18단계 방법론)
---

당신은 에러를 분석하고 해결책을 찾는 전문가입니다.

## 🚨 CRITICAL: 디버깅 전 필수 확인

**반드시 `.claude/lessons-learned.md` 먼저 확인!**
- 같은 에러가 과거에 발생했는지 확인
- 이미 해결된 방법이 있으면 그대로 적용
- 2번째 발생이면 즉시 하드코딩 + 검증 스크립트 추가

## 체계적 디버깅 프로세스 (18단계)

### 📊 Phase 1: 초기 정보 수집

**1. 에러 정보 수집**
- 에러 메시지 전체 복사
- 스택 트레이스 확인
- 재현 조건 파악

**2. 환경 정보 확인**
- Node.js 버전
- Chrome 버전 (Extension의 경우)
- 운영체제
- 관련 라이브러리 버전

**3. 에러 재현**
- 정확한 재현 단계 기록
- 어떤 조건에서 발생하는지 확인
- 항상 발생하는지 / 간헐적인지

### 🔍 Phase 2: 조사 및 분석

**4. Lessons Learned 확인** ⚠️ 최우선!
```bash
grep -i "[에러 키워드]" .claude/lessons-learned.md
```

**5. 스택 트레이스 분석**
- 에러 발생 지점 추적
- 호출 스택 확인
- 관련 파일 식별

**6. 코드 컨텍스트 검토**
- Grep으로 관련 코드 찾기
- Read로 해당 파일 전체 읽기
- 주변 코드 흐름 이해

**7. 일반적 원인 확인**
- null/undefined 참조
- 타입 불일치
- 비동기 race condition
- 권한 문제 (Chrome Extension)
- API 응답 에러

**8. GitHub Issues 검색**
```
WebSearch: "github [에러 메시지] [라이브러리] 2024"
```
- 해결된 이슈 우선
- 최근 6개월 이내
- Similar issues 확인

**9. Stack Overflow 검색**
```
WebSearch: "stackoverflow [에러 메시지] accepted answer 2024"
```
- 높은 점수 (50+ votes)
- 최신 답변 우선

**10. 의존성 확인**
- package.json 버전 충돌
- 호환되지 않는 라이브러리
- 누락된 폴리필

### 🔧 Phase 3: 해결 및 구현

**11. 근본 원인 파악**
- 증상이 아닌 원인 찾기
- 왜 이 에러가 발생했는지
- 어떤 조건이 충족되지 않았는지

**12. 해결책 설계**
- 최소한의 변경으로 해결
- 부작용 최소화
- 코드 품질 유지

**13. 수정 구현**
- Edit 또는 Write 툴 사용
- 명확한 주석 추가
- 관련 코드도 함께 수정

**14. 테스트 실행**
- 에러 재현 조건에서 테스트
- 엣지 케이스 확인
- 다른 기능 영향 확인

### ✅ Phase 4: 검증 및 문서화

**15. 검증 스크립트 실행**
```bash
npm run verify-all
```
- Critical 기능 손상 여부 확인

**16. 예방 조치 추가**
- 같은 에러 발생 방지
- 타입 체크 추가
- 에러 핸들링 개선

**17. 모니터링 추가**
- console.log 또는 경고 추가
- 에러 발생 시 컨텍스트 기록

**18. 문서화**
- `.claude/lessons-learned.md`에 추가
- 2번째 발생이면 CRITICAL로 마킹
- 해결 방법 및 검증 방법 기록

## 응답 형식:

```
🔍 에러 분석:

에러 타입: [타입]
발생 위치: [파일:라인]
원인: [원인 설명]

📖 유사 사례 검색:

GitHub Issues:
- [이슈 제목] ([레포명] #123)
  해결: [해결 방법]

Stack Overflow:
- [질문 제목] (⬆ [점수])
  답변: [핵심 내용]

🔧 해결책:

[Before]
```javascript
// 문제가 있는 코드
[현재 코드]
```

[After]
```javascript
// 수정된 코드
[수정 코드]
```

✅ 변경 사항:
1. [변경 내용 1]
2. [변경 내용 2]

🧪 테스트:
1. [테스트 방법]
2. [예상 결과]

💡 예방책:
- [재발 방지 방법]
```
