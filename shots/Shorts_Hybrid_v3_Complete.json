{
    "name": "Shorts_Hybrid_v3_Complete (Cloud-Native)",
    "nodes": [
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "hours",
                            "hoursInterval": 24
                        }
                    ]
                }
            },
            "id": "trigger-schedule",
            "name": "Every Morning 9AM",
            "type": "n8n-nodes-base.scheduleTrigger",
            "typeVersion": 1.1,
            "position": [
                -1600,
                0
            ]
        },
        {
            "parameters": {
                "content": "### ðŸ§  Stage 1: Trend Analysis (Brain)\n- **Role**: ë§¤ì¼ ì•„ì¹¨ 'ì‹œë‹ˆì–´ ê±´ê°•' íŠ¸ë Œë“œ ë¶„ì„\n- **Output**: ì˜¤ëŠ˜ì˜ ì£¼ì œ (ì˜ˆ: í™˜ì ˆê¸° ë¬´ë¦Ž í†µì¦)\n- **Log**: êµ¬ê¸€ ì‹œíŠ¸ì— 'ê¸°íš ì¤‘' ìƒíƒœë¡œ ì €ìž¥",
                "height": 260,
                "width": 360,
                "color": 4
            },
            "id": "note-stage1",
            "name": "Note - Stage 1",
            "type": "n8n-nodes-base.stickyNote",
            "typeVersion": 1,
            "position": [
                -1400,
                -140
            ]
        },
        {
            "parameters": {
                "model": {
                    "__rl": true,
                    "value": "gpt-4o",
                    "mode": "list",
                    "cachedResultName": "gpt-4o"
                },
                "options": {
                    "systemMessage": "ë‹¹ì‹ ì€ ìœ íŠœë¸Œ íŠ¸ë Œë“œ ë¶„ì„ê°€ìž…ë‹ˆë‹¤. í˜„ìž¬ ë‚ ì§œì™€ ê³„ì ˆì„ ê³ ë ¤í•˜ì—¬ 60ëŒ€ ì´ìƒ ì‹œë‹ˆì–´ë“¤ì´ ê°€ìž¥ ê´€ì‹¬ ê°€ì§ˆë§Œí•œ 'ê±´ê°• ì£¼ì œ'ë¥¼ í•˜ë‚˜ ì„ ì •í•˜ì„¸ìš”."
                }
            },
            "id": "openai-trend",
            "name": "Trend Analyst AI",
            "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
            "typeVersion": 1,
            "position": [
                -1200,
                0
            ],
            "credentials": {
                "openAiApi": {
                    "id": "sJPPMgnhjsgphIV9",
                    "name": "OpenAi account"
                }
            }
        },
        {
            "parameters": {
                "operation": "append",
                "documentId": {
                    "__rl": true,
                    "value": "YOUR_GOOGLE_SHEET_ID",
                    "mode": "id"
                },
                "sheetName": {
                    "__rl": true,
                    "value": "Sheet1",
                    "mode": "id"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {
                        "Date": "={{ $now.toFormat('yyyy-MM-dd') }}",
                        "Topic": "={{ $json.text }}",
                        "Status": "Planned"
                    }
                }
            },
            "id": "sheets-log-topic",
            "name": "Log Topic (Sheets)",
            "type": "n8n-nodes-base.googleSheets",
            "typeVersion": 4.5,
            "position": [
                -1000,
                0
            ],
            "credentials": {
                "googleSheetsOAuth2Api": {
                    "id": "qHzPZhMeMIC0bqve",
                    "name": "Google Sheets account"
                }
            }
        },
        {
            "parameters": {
                "content": "### âœï¸ Stage 2: Creative (Boram)\n- **Role**: 'ë³´ëžŒì´' íŽ˜ë¥´ì†Œë‚˜ë¡œ ëŒ€ë³¸ ìž‘ì„±\n- **Logic**: Hook -> Solution -> Promise\n- **Splitter**: 6ë¬¸ìž¥ ê°•ì œ ë¶„í•  (Code Node)",
                "height": 260,
                "width": 360,
                "color": 5
            },
            "id": "note-stage2",
            "name": "Note - Stage 2",
            "type": "n8n-nodes-base.stickyNote",
            "typeVersion": 1,
            "position": [
                -800,
                -140
            ]
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "={{ $json.Topic }} ì£¼ì œë¡œ ì‹œë‹ˆì–´ íƒ€ê²Ÿ ì‡¼ì¸  ëŒ€ë³¸ì„ ìž‘ì„±í•˜ì„¸ìš”.\n\n# Persona (ë³´ëžŒì´)\n- 5ì‚´ ì†ì£¼, ê·€ì—½ê³  ì˜ˆì˜ë°”ë¦„\n- ë§íˆ¬: \"í• ë¨¸ë‹ˆ~\", \"~í•´ìš”!\"\n\n# Rules\n1. Hook (ë¬¸ìž¥1): ì¦ìƒ ì§ˆë¬¸\n2. Solution (ë¬¸ìž¥2~5): ì‰¬ìš´ í•´ê²°ì±…\n3. Promise (ë¬¸ìž¥6): íš¨ê³¼ ë³´ìž¥\n4. ì´ 6ë¬¸ìž¥ í•„ìˆ˜.",
                "options": {}
            },
            "id": "agent-boram",
            "name": "Agent - Boram Writer",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1,
            "position": [
                -800,
                0
            ]
        },
        {
            "parameters": {
                "jsCode": "// ðŸŽµ Robust Sentence Splitter (v3)\n// ë¬¸ìž¥ì„ ì •í™•ížˆ 6ê°œë¡œ ë¶„ë¦¬í•˜ê³ , ë¶€ì¡±í•˜ë©´ ì±„ì›Œë„£ëŠ” ë¡œì§\n\nconst input = items[0].json;\nconst narrationText = input.output || input.text || '';\n\nlet splitSentences = narrationText\n  .split(/[.!?]\\s*/)\n  .map(s => s.trim())\n  .filter(s => s);\n\n// 6ê°œê°€ ì•„ë‹ˆë©´ ì¤„ë°”ê¿ˆìœ¼ë¡œ ìž¬ì‹œë„\nif (splitSentences.length !== 6) {\n  const newlineSplit = narrationText.split('\\n').map(s => s.trim()).filter(s => s);\n  if (newlineSplit.length >= 2) splitSentences = newlineSplit;\n}\n\n// ë¶€ì¡±í•˜ë©´ ì±„ìš°ê¸°\nwhile (splitSentences.length < 6) splitSentences.push('ì‚¬ëž‘í•´ìš” í• ë¨¸ë‹ˆ!');\n\n// 6ê°œ ì´ˆê³¼ë©´ ìžë¥´ê¸°\nsplitSentences = splitSentences.slice(0, 6);\n\n// ê²°ê³¼ ë°˜í™˜\nreturn splitSentences.map((sentence, index) => ({\n  json: {\n    sentence: sentence,\n    index: index + 1,\n    total: 6,\n    topic: input.Topic // Keep context\n  }\n}));"
            },
            "id": "code-splitter",
            "name": "Code - Robust Splitter",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -600,
                0
            ]
        },
        {
            "parameters": {
                "content": "### ðŸŽ¨ Stage 3: Production (Factory)\n- **Visual**: DALL-E 3 (Pixar Style)\n- **Audio**: OpenAI TTS (Nova, 0.85x)\n- **Backup**: êµ¬ê¸€ ë“œë¼ì´ë¸Œì— ìžì‚° ì €ìž¥",
                "height": 260,
                "width": 360,
                "color": 3
            },
            "id": "note-stage3",
            "name": "Note - Stage 3",
            "type": "n8n-nodes-base.stickyNote",
            "typeVersion": 1,
            "position": [
                -400,
                -140
            ]
        },
        {
            "parameters": {
                "resource": "image",
                "operation": "generate",
                "prompt": "={{ 'Pixar style 3D animation, cute 5-year-old Korean girl (Boram) wearing doctor gown, ' + $json.sentence }}",
                "model": "dall-e-3",
                "options": {
                    "size": "1024x1024",
                    "quality": "standard",
                    "style": "vivid"
                }
            },
            "id": "dalle-image",
            "name": "DALL-E 3 Image",
            "type": "n8n-nodes-base.openAi",
            "typeVersion": 1,
            "position": [
                -400,
                -100
            ],
            "credentials": {
                "openAiApi": {
                    "id": "sJPPMgnhjsgphIV9",
                    "name": "OpenAi account"
                }
            }
        },
        {
            "parameters": {
                "resource": "audio",
                "operation": "speech",
                "model": "tts-1-hd",
                "text": "={{ $json.sentence }}",
                "options": {
                    "voice": "nova",
                    "speed": 0.85
                }
            },
            "id": "openai-tts",
            "name": "OpenAI TTS",
            "type": "n8n-nodes-base.openAi",
            "typeVersion": 1,
            "position": [
                -400,
                100
            ],
            "credentials": {
                "openAiApi": {
                    "id": "sJPPMgnhjsgphIV9",
                    "name": "OpenAi account"
                }
            }
        },
        {
            "parameters": {
                "authentication": "oAuth2",
                "operation": "upload",
                "fileId": "={{ $json.id }}",
                "options": {}
            },
            "id": "drive-backup",
            "name": "Backup to Drive",
            "type": "n8n-nodes-base.googleDrive",
            "typeVersion": 3,
            "position": [
                -200,
                0
            ],
            "credentials": {
                "googleDriveOAuth2Api": {
                    "id": "LHO6WdTb8YMFt3uX",
                    "name": "Google Drive account"
                }
            }
        },
        {
            "parameters": {
                "content": "### ðŸŽ¬ Stage 4: Rendering (Cloud)\n- **Engine**: Creatomate (No Local FFmpeg)\n- **Logic**: 6ê°œ ìžì‚° í•©ì³ì„œ ë Œë”ë§\n- **Verify**: íŒŒì¼ í¬ê¸° ì²´í¬ (>2MB)",
                "height": 260,
                "width": 360,
                "color": 2
            },
            "id": "note-stage4",
            "name": "Note - Stage 4",
            "type": "n8n-nodes-base.stickyNote",
            "typeVersion": 1,
            "position": [
                0,
                -140
            ]
        },
        {
            "parameters": {
                "method": "POST",
                "url": "https://api.creatomate.com/v1/renders",
                "sendBody": true,
                "bodyParameters": {
                    "parameters": [
                        {
                            "name": "template_id",
                            "value": "YOUR_TEMPLATE_ID"
                        },
                        {
                            "name": "modifications",
                            "value": "={{ {\n  \"Image_1\": $('DALL-E 3 Image').all()[0].json.url,\n  \"Audio_1\": $('OpenAI TTS').all()[0].json.url,\n  \"Text_1\": $('Code - Robust Splitter').all()[0].json.sentence,\n  \"Image_2\": $('DALL-E 3 Image').all()[1].json.url,\n  \"Audio_2\": $('OpenAI TTS').all()[1].json.url,\n  \"Text_2\": $('Code - Robust Splitter').all()[1].json.sentence\n  // ... Add up to 6\n} }}"
                        }
                    ]
                },
                "options": {}
            },
            "id": "creatomate-render",
            "name": "Creatomate Render",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.2,
            "position": [
                0,
                0
            ],
            "credentials": {
                "httpHeaderAuth": {
                    "id": "Tzlf95EWgm3pWD1A",
                    "name": "Header Auth account"
                }
            }
        },
        {
            "parameters": {
                "amount": 30,
                "unit": "seconds"
            },
            "id": "wait-render",
            "name": "Wait for Render",
            "type": "n8n-nodes-base.wait",
            "typeVersion": 1,
            "position": [
                200,
                0
            ]
        },
        {
            "parameters": {
                "url": "={{ $json.url }}",
                "options": {}
            },
            "id": "get-video",
            "name": "Get Final Video",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.2,
            "position": [
                400,
                0
            ]
        },
        {
            "parameters": {
                "conditions": {
                    "number": [
                        {
                            "value1": "={{ $binary.data.fileSizeInBytes }}",
                            "operation": "larger",
                            "value2": 2000000
                        }
                    ]
                }
            },
            "id": "verify-size",
            "name": "Verify Size (>2MB)",
            "type": "n8n-nodes-base.if",
            "typeVersion": 1,
            "position": [
                600,
                0
            ]
        },
        {
            "parameters": {
                "content": "### ðŸ“¢ Stage 5: Distribution\n- **YouTube**: Unlisted Upload\n- **Sheets**: Update 'Published' & URL\n- **Notify**: Complete Alert",
                "height": 260,
                "width": 360,
                "color": 7
            },
            "id": "note-stage5",
            "name": "Note - Stage 5",
            "type": "n8n-nodes-base.stickyNote",
            "typeVersion": 1,
            "position": [
                800,
                -140
            ]
        },
        {
            "parameters": {
                "resource": "video",
                "operation": "upload",
                "title": "={{ $('Log Topic (Sheets)').item.json.Topic }} - ë³´ëžŒì´ì˜ ê±´ê°•ì •ë³´",
                "description": "ì‹œë‹ˆì–´ ê±´ê°• ê¿€íŒ! #Shorts #ê±´ê°• #ë³´ëžŒì´",
                "privacyStatus": "unlisted",
                "options": {
                    "notifySubscribers": false,
                    "selfDeclaredMadeForKids": false
                }
            },
            "id": "youtube-upload",
            "name": "YouTube Upload",
            "type": "n8n-nodes-base.youTube",
            "typeVersion": 1,
            "position": [
                800,
                -100
            ],
            "credentials": {
                "youTubeOAuth2Api": {
                    "id": "cpLeI7xNofzl0Q7R",
                    "name": "YouTube account"
                }
            }
        },
        {
            "parameters": {
                "operation": "update",
                "documentId": {
                    "__rl": true,
                    "value": "YOUR_GOOGLE_SHEET_ID",
                    "mode": "id"
                },
                "sheetName": {
                    "__rl": true,
                    "value": "Sheet1",
                    "mode": "id"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {
                        "Status": "Published",
                        "Video URL": "={{ $json.url }}"
                    }
                }
            },
            "id": "sheets-update",
            "name": "Update Sheets",
            "type": "n8n-nodes-base.googleSheets",
            "typeVersion": 4.5,
            "position": [
                1000,
                0
            ],
            "credentials": {
                "googleSheetsOAuth2Api": {
                    "id": "qHzPZhMeMIC0bqve",
                    "name": "Google Sheets account"
                }
            }
        }
    ],
    "connections": {
        "Every Morning 9AM": {
            "main": [
                [
                    {
                        "node": "Trend Analyst AI",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Trend Analyst AI": {
            "main": [
                [
                    {
                        "node": "Log Topic (Sheets)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Log Topic (Sheets)':": {
            "main": [
                [
                    {
                        "node": "Agent - Boram Writer",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Agent - Boram Writer": {
            "main": [
                [
                    {
                        "node": "Code - Robust Splitter",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Code - Robust Splitter": {
            "main": [
                [
                    {
                        "node": "DALL-E 3 Image",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "OpenAI TTS",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "DALL-E 3 Image": {
            "main": [
                [
                    {
                        "node": "Backup to Drive",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "OpenAI TTS": {
            "main": [
                [
                    {
                        "node": "Backup to Drive",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Backup to Drive": {
            "main": [
                [
                    {
                        "node": "Creatomate Render",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Creatomate Render": {
            "main": [
                [
                    {
                        "node": "Wait for Render",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Wait for Render": {
            "main": [
                [
                    {
                        "node": "Get Final Video",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Get Final Video": {
            "main": [
                [
                    {
                        "node": "Verify Size (>2MB)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Verify Size (>2MB)": {
            "main": [
                [
                    {
                        "node": "YouTube Upload",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "YouTube Upload": {
            "main": [
                [
                    {
                        "node": "Update Sheets",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    }
}